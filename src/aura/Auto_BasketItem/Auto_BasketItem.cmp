<aura:component description="Auto_BasketItem"
                implements="forceCommunity:availableForAllPageTypes"
                access="global"
                controller="Auto_BasketItem">

    <aura:attribute name="product" type="OrderItem"/>

    <aura:registerEvent name="removeFromBasketEvent"
                        type="c:Auto_RemoveFromBasketEvent"/>

    <aura:attribute name="isOpenConfirmDialog"
                    type="Boolean"
                    default="false"/>

    <div class="slds-grid slds-m-around--small">

        <a href="{! $Site.siteUrlPrefix + '/detail/' + v.product.Product2Id}"
           class="slds-col slds-size--4-of-12 slds-truncate my-style-text slds-p-around--x-small"
           data-index="{!v.product.Product2Id}"
           onclick="{!c.setSessionStorageRecordId}">{!v.product.Product2.Name}
        </a>

        <div class="slds-col slds-size--2-of-12 slds-text-align--right slds-p-around--x-small my-style-text">

            <lightning:button variant="neutral"
                              label="-"
                              title="Minus"
                              class="slds-m-right--small slds-text-title_bold"
                              onclick="{!c.clickMinusQuantity}"/>

            {!v.product.Quantity} pcs.

            <lightning:button variant="neutral"
                              label="+"
                              title="Plus"
                              class="slds-m-left--small slds-text-title_bold"
                              onclick="{!c.clickPlusQuantity}"/>
        </div>

        <div class="slds-col slds-size--2-of-12 slds-text-align--right slds-p-around--x-small my-style-text">
            <lightning:formattedNumber value="{!v.product.TotalPrice}"
                                       style="currency"
                                       currencyCode="EUR"/>
        </div>

        <div class="slds-col slds-size--3-of-12 slds-text-align--right slds-p-around--x-small my-style-text">
            (<lightning:formattedNumber value="{!v.product.UnitPrice}"
                                       style="currency"
                                       currencyCode="EUR"/>
            per pcs.)
        </div>

        <div class="slds-col slds-size--1-of-12 slds-text-align--center">
            <lightning:button variant="destructive"
                              label="Remove"
                              title="Remove"
                              onclick="{!c.clickOpenModal}"/>
        </div>

    </div>


    <aura:if isTrue="{!v.isOpenConfirmDialog}">
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                 aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">

                <header class="slds-modal__header">
                    <h1>Remove product</h1>
                </header>

                <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                    <h1>{!$Label.c.Auto_Are_You_Sure}</h1>
                </div>

                <footer class="slds-modal__footer">

                    <lightning:button variant="neutral"
                                      label="{!$Label.c.Auto_Cancel}"
                                      title="{!$Label.c.Auto_Cancel}"
                                      onclick="{!c.clickCloseModal}"/>

                    <lightning:button variant="destructive"
                                      label="Remove"
                                      onclick="{!c.clickRemoveItem}" />
                </footer>
            </div>
        </section>

        <div class="slds-backdrop slds-backdrop_open"></div>
    </aura:if>

    <c:Auto_ShowToast aura:id="toast"/>

</aura:component>